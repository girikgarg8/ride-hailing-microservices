# =============================================================================
# UBER BOOKING SERVICE - PRODUCTION CONFIGURATION
# =============================================================================
# This file contains AWS production-specific configurations that override
# the default application.properties when running with --spring.profiles.active=prod

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# AWS RDS MySQL connection - uses environment variables for security
# Why needed: Production database is on AWS RDS, not localhost
spring.datasource.url=jdbc:mysql://${RDS_ENDPOINT}:3306/Uber_Db_Prod
spring.datasource.username=${RDS_USERNAME}
spring.datasource.password=${RDS_PASSWORD}

# =============================================================================
# SERVICE DISCOVERY CONFIGURATION
# =============================================================================
# AWS Eureka server connection - uses private IP for internal communication
# Why needed: Eureka server runs on different EC2 instance with private IP
eureka.client.service-url.defaultZone=http://${EUREKA_PRIVATE_IP}:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.prefer-ip-address=true
# Instance ID includes private IP for uniqueness in AWS environment
eureka.instance.instance-id=${spring.application.name}:${EC2_PRIVATE_IP}:${server.port}

# =============================================================================
# KAFKA CONFIGURATION
# =============================================================================
# AWS MSK (Managed Streaming for Kafka) connection
# Why needed: Production Kafka is on AWS MSK, not localhost
spring.kafka.bootstrap-servers=${MSK_BROKERS}
spring.kafka.consumer.group-id=booking-service-group
spring.kafka.consumer.auto-offset-reset=earliest

# Kafka consumer optimizations for AWS MSK
# Why needed: AWS MSK has different network characteristics than local Kafka
spring.kafka.consumer.session-timeout-ms=30000
spring.kafka.consumer.heartbeat-interval-ms=10000
spring.kafka.consumer.max-poll-interval-ms=300000

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# CloudWatch-compatible logging with file output
# Why needed: AWS CloudWatch agent reads from these log files
logging.file.name=/var/log/uber-services/booking.log
logging.level.com.girikgarg.uberbookingservice=INFO
logging.level.org.apache.kafka=INFO

# =============================================================================
# FLYWAY CONFIGURATION
# =============================================================================
# Disabled - Entity Service handles all database migrations
# Why needed: Prevents conflicts when multiple services try to run migrations
spring.flyway.enabled=false

# =============================================================================
# ACTUATOR CONFIGURATION
# =============================================================================
# Health checks for monitoring
# Why needed: Monitoring systems use /actuator/health
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always