# =============================================================================
# UBER LOCATION SERVICE - PRODUCTION CONFIGURATION
# =============================================================================
# This file contains AWS production-specific configurations that override
# the default application.properties when running with --spring.profiles.active=prod

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
# AWS ElastiCache Redis connection - uses environment variables for endpoint
# Why needed: Production Redis is on AWS ElastiCache, not localhost
spring.data.redis.host=${ELASTICACHE_ENDPOINT}
spring.data.redis.port=6379
spring.data.redis.timeout=2000ms

# ElastiCache-specific optimizations
# Why needed: AWS ElastiCache has different network characteristics than local Redis
spring.data.redis.jedis.pool.max-active=20
spring.data.redis.jedis.pool.max-idle=10
spring.data.redis.jedis.pool.min-idle=2
spring.data.redis.jedis.pool.max-wait=2000ms

# =============================================================================
# SERVICE DISCOVERY CONFIGURATION
# =============================================================================
# AWS Eureka server connection - uses private IP for internal communication
# Why needed: Eureka server runs on different EC2 instance with private IP
eureka.client.service-url.defaultZone=http://${EUREKA_PRIVATE_IP}:8761/eureka/
eureka.instance.prefer-ip-address=true
# Instance ID includes private IP for uniqueness in AWS environment
eureka.instance.instance-id=${spring.application.name}:${EC2_PRIVATE_IP}:${server.port}

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# CloudWatch-compatible logging with file output
# Why needed: AWS CloudWatch agent reads from these log files
logging.file.name=/var/log/uber-services/location.log
logging.level.com.girikgarg.uberlocationservice=INFO
logging.level.org.springframework.data.redis=INFO

# =============================================================================
# FLYWAY CONFIGURATION
# =============================================================================
# Disabled - Entity Service handles all database migrations
# Why needed: Location Service doesn't need database migrations (Redis-only)
spring.flyway.enabled=false

# =============================================================================
# ACTUATOR CONFIGURATION
# =============================================================================
# Health checks for monitoring and service discovery
# Why needed: Eureka and monitoring systems use /actuator/health
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always