# =============================================================================
# UBER SOCKET SERVICE - PRODUCTION CONFIGURATION
# =============================================================================
# This file contains AWS production-specific configurations that override
# the default application.properties when running with --spring.profiles.active=prod

# =============================================================================
# SERVICE DISCOVERY CONFIGURATION
# =============================================================================
# AWS Eureka server connection - uses private IP for internal communication
# Why needed: Eureka server runs on different EC2 instance with private IP
eureka.client.service-url.defaultZone=http://${EUREKA_PRIVATE_IP}:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.prefer-ip-address=true
# Instance ID includes private IP for uniqueness in AWS environment
eureka.instance.instance-id=${spring.application.name}:${EC2_PRIVATE_IP}:${server.port}

# =============================================================================
# KAFKA CONFIGURATION
# =============================================================================
# AWS MSK (Managed Streaming for Kafka) connection
# Why needed: Production Kafka is on AWS MSK, not localhost
spring.kafka.bootstrap-servers=${MSK_BROKERS}

# Kafka producer optimizations for AWS MSK
# Why needed: AWS MSK has different network characteristics than local Kafka
spring.kafka.producer.acks=all
spring.kafka.producer.retries=3
spring.kafka.producer.batch-size=16384
spring.kafka.producer.linger-ms=5

# =============================================================================
# INTER-SERVICE COMMUNICATION
# =============================================================================
# Booking Service URL via Eureka service discovery
# Why needed: In AWS, services communicate via private IPs through Eureka
booking.service.url=http://UBER-BOOKING-SERVICE

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# CloudWatch-compatible logging with file output
# Why needed: AWS CloudWatch agent reads from these log files
logging.file.name=/var/log/uber-services/socket.log
logging.level.com.girikgarg.ubersocketservice=INFO
logging.level.org.apache.kafka=INFO
logging.level.org.springframework.web.socket=INFO

# =============================================================================
# ACTUATOR CONFIGURATION
# =============================================================================
# Health checks for monitoring
# Why needed: Monitoring systems use /actuator/health
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always