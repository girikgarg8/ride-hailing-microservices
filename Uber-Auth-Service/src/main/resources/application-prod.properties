# =============================================================================
# UBER AUTH SERVICE - PRODUCTION CONFIGURATION
# =============================================================================
# This file contains AWS production-specific configurations that override
# the default application.properties when running with --spring.profiles.active=prod

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
# AWS RDS MySQL connection - uses environment variables for security
# Why needed: Production database is on AWS RDS, not localhost
spring.datasource.url=jdbc:mysql://${RDS_ENDPOINT}:3306/Uber_Db_Prod
spring.datasource.username=${RDS_USERNAME}
spring.datasource.password=${RDS_PASSWORD}

# =============================================================================
# SERVICE DISCOVERY CONFIGURATION  
# =============================================================================
# AWS Eureka server connection - uses private IP for internal communication
# Why needed: Eureka server runs on different EC2 instance with private IP
eureka.client.service-url.defaultZone=http://${EUREKA_PRIVATE_IP}:8761/eureka/
eureka.instance.prefer-ip-address=true
# Instance ID includes private IP for uniqueness in AWS environment
eureka.instance.instance-id=${spring.application.name}:${EC2_PRIVATE_IP}:${server.port}

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# JWT secret from environment variable - CRITICAL for production security
# Why needed: Must match API Gateway's JWT secret for token validation
jwt.secret=${JWT_SECRET}

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
# CloudWatch-compatible logging with file output
# Why needed: AWS CloudWatch agent reads from these log files
logging.file.name=/var/log/uber-services/auth.log
logging.level.com.girikgarg.uberauthservice=INFO
logging.level.org.springframework.security=INFO

# =============================================================================
# FLYWAY CONFIGURATION
# =============================================================================
# Disabled - Entity Service handles all database migrations
# Why needed: Prevents conflicts when multiple services try to run migrations
spring.flyway.enabled=false

# =============================================================================
# ACTUATOR CONFIGURATION
# =============================================================================
# Health checks for AWS ALB and monitoring
# Why needed: ALB uses /actuator/health for health checks
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always